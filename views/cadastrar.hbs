<div class="card-body">
    <ul id="resposta"></ul>
    <p class="form-title">Login on chat</p>
    <form id="cadastro" method="post" class="form" action="/users/cadastrar">
        <div class="form-group">
            <label for="name">Username:</label>
            <input name="user" class="form-control" type="text" placeholder="Username">
        </div>
        <div class="form-group">
            <label for="name">Email:</label>
            <input name="mail" class="form-control" type="email" placeholder="E-mail">
        </div>
        <div class="form-group">
            <label for="pwd">Password:</label>
            <input name="pass" class="form-control" type="password" placeholder="Password">

        </div>
        <button type="submit" class="btn btn-dark">Cadastrar</button>
    </form>
</div>
<script>
    (function () {

        let form = document.querySelector('#cadastro'),
            httpRequest = new XMLHttpRequest(),
            resposta = document.querySelector('#resposta');

        if (window.XMLHttpRequest) {
            httpRequest = new XMLHttpRequest();
        } else if (window.ActiveXObject) {
            httpRequest = new ActiveXObject("Microsoft.XMLHTTP");
        }

        form.addEventListener("submit", function (ev) {
            ev.preventDefault();
            resposta.innerHTML = "";
            httpRequest.open("post", form.getAttribute('action'));
            httpRequest.send(new FormData(this));

            httpRequest.onreadystatechange = function () {
                if (httpRequest.readyState === 4) {
                    for (msg of JSON.parse(this.responseText))
                        resposta.innerHTML += '<li>' + msg.message + '</li>';
                }
            }
        })
    }())
</script>